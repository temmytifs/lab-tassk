<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Task Tracker</title>
    <style>
        ul {
            list-style: none;
            padding: 0;
        }


        li {
            margin: 5px 0;
        }


        .completed {
            text-decoration: line-through;
        }
    </style>
</head>

<body>
    <h1>Task Tracker</h1>

    <div>
        <input type="text" id="task-input" placeholder="Add or remove a new task">
        <button id="add-task">Add Task</button>
        <button id="remove">remove Task</button>
    </div>

    <ul id="task-list">
        <!-- Tasks will be added here -->
    </ul>

    <div>
        <label>Show completed tasks: <input type="checkbox" id="show-completed"></label>
    </div>

    <div id = "tasks-completed">

    </div>

    <script>
        // JavaScript code goes here
        let txtInput = document.querySelector("#task-input");
        let btnaddTask = document.getElementById("add-task")
        let taskList = document.getElementById("task-list")
        let showCompleted = document.getElementById("show-completed")
        let btnRemovetask = document.getElementById("remove")
        let tasksComplted = document.getElementById("task-completed")


        btnaddTask.addEventListener("click", task);
        btnRemovetask.addEventListener("click", task2)
        showCompleted.addEventListener("click", task3)
        function task() {
            let task = txtInput.value;

            let taskData = localStorage.getItem("taskey");

            if (taskData === null) {
                taskData = [];
            } else {
                taskData = JSON.parse(taskData);
            }
            taskData.push(task );
            localStorage.setItem("taskey", JSON.stringify(taskData));
            txtInput.value = "";
            taskList.innerHTML = `${task} Task saved successfully"`;
        }

        function displayList() {
            let taskData = localStorage.getItem("taskey");
            taskData = JSON.parse(taskData);

            taskData.forEach(function (taskOutput) {
                let task = taskOutput;

                let listItem = document.createElement("li");
                listItem.textContent = task;
                taskList.appendChild(listItem);
                listItem.addEventListener("click", getlist)
            })
            
        }
        displayList()

        function getlist(event) {
            let tasking = event.target.textContent;
            txtInput.value = tasking;
        }

        function task2() {
            let removeTask = txtInput.value;
            let taskData = JSON.parse(localStorage.getItem("taskey"));
            let remTask = taskData.indexOf(removeTask);
            if (remTask != -1) {
                taskData.splice(remTask, 1);
                taskList.innerHTML = "removed sucessfully";
            } else {
                taskList.innerHTML = "task did not exist"
            }
            localStorage.setItem('taskey', JSON.stringify(taskData));
        }
       
        let flag = true;
        function task3() {
           if (flag){
            displayList();
            flag = false;
           } else {
            tasksComplted.style.display = "none";
            flag = true;
           }
        }
        

        

    </script>
</body>

</html>